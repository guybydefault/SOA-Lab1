
# Условие лабораторной работы №1 (ветка main)
Разработать веб-сервис на базе сервлета, реализующий управление коллекцией объектов, и клиентское веб-приложение, предоставляющее интерфейс к разработанному веб-сервису. В коллекции необходимо хранить объекты класса Flat, описание которого приведено ниже:
 ```
public class Flat {
	private int id; //Значение поля должно быть больше 0, Значение этого поля должно быть уникальным, Значение этого поля должно генерироваться автоматически
	private String name; //Поле не может быть null, Строка не может быть пустой
	private Coordinates coordinates; //Поле не может быть null
  private java.time.LocalDateTime creationDate; //Поле не может быть null, Значение этого поля должно генерироваться автоматически
	private long area; //Значение поля должно быть больше 0
	private long numberOfRooms; //Максимальное значение поля: 8, Значение поля должно быть больше 0
	private Furnish furnish; //Поле может быть null
  private View view; //Поле не может быть null
	private Transport transport; //Поле не может быть null
  private House house; //Поле не может быть null
}
public class Coordinates {
    private Double x; //Поле не может быть null
	private long y;
}
public class House {
    private String name; //Поле не может быть null
	private int year; //Значение поля должно быть больше 0
	private Long numberOfFloors; //Значение поля должно быть больше 0
	private Integer numberOfFlatsOnFloor; //Значение поля должно быть больше 0
	private int numberOfLifts; //Значение поля должно быть больше 0
}
public enum Furnish {
    NONE,
    BAD,
    LITTLE;
}
public enum View {
    PARK,
    NORMAL,
    GOOD;
}
public enum Transport {
    FEW,
	LITTLE,
	ENOUGH;
}
 ```
 
## Требования к веб-сервису
1) API, реализуемый сервисом, должен соответствовать рекомендациям подхода RESTful.
2) Необходимо реализовать следующий базовый набор операций с объектами коллекции: добавление нового элемента, получение элемента по ИД, обновление элемента, удаление элемента, получение массива элементов.
3) Операция, выполняемая над объектом коллекции, должна определяться методом HTTP-запроса.
4) Операция получения массива элементов должна поддерживать возможность сортировки и фильтрации по любой комбинации полей класса, а также возможность постраничного вывода результатов выборки с указанием размера и порядкового номера выводимой страницы.
5) Все параметры, необходимые для выполнения операции, должны передаваться в URL запроса.
6) Данные коллекции, которыми управляет веб-сервис, должны храниться в реляционной базе данных.
7) Информация об объектах коллекции должна передаваться в формате json.
8) В случае передачи сервису данных, нарушающих заданные на уровне класса ограничения целостности, сервис должен возвращать код ответа http, соответствующий произошедшей ошибке.
9) Веб-сервис должен быть "упакован" в веб-приложение, которое необходимо развернуть на сервере приложений Payara.
10) Помимо базового набора, веб-сервис должен поддерживать следующие операции над объектами коллекции:
Рассчитать среднее значение поля numberOfRooms для всех объектов.
Вернуть один (любой) объект, значение поля transport которого является максимальным.
Вернуть количество объектов, значение поля transport которых больше заданного.
Эти операции должны размещаться на отдельных URL.

## Требования к клиентскому приложению:
1) Клиентское приложение может быть написано на любом веб-фреймворке, который можно запустить на сервере helios
2) Клиентское приложение должно обеспечить полный набор возможностей по управлению объектами коллекции, предоставляемых веб-сервисом -- включая сортировку, фильтрацию и постраничный вывод.
3) Клиентское приложение должно преобразовывать передаваемые сервисом данные в человеко-читаемый вид -- параграф текста, таблицу и т.д.
4) Клиентское приложение должно информировать пользователя об ошибках, возникающих на стороне сервиса, в частности, о том, что сервису были отправлены невалиданые данные.
5) Веб-сервис и клиентское приложение должны быть развёрнуты на сервере helios.


# Условие лабораторной работы №2 (ветка lab2)

Доработать веб-сервис и клиентское приложение из лабораторной работы #1 следующим образом:
1) Отрефакторить сервис из лабораторной работы #1, переписав его на фреймворке JAX-RS с сохранением функциональности и API. Набор функций, реализуемых сервисом, изменяться не должен!
2) Развернуть переработанный сервис на сервере приложений Payara.
3) Разработать новый сервис, вызывающий API существующего.
4) Новый сервис должен быть разработан на базе Spring MVC REST и развёрнут на сервере приложений WildFly.
5) Разработать клиентское приложение, позволяющее протестировать API нового сервиса.
6) Доступ к обоим сервисам должен быть реализован с по протоколу https с самоподписанным сертификатом сервера. Доступ к сервисам посредством http без шифрования должен быть запрещён.
7) Новый сервис должен располагаться на URL /agency и реализовывать следующие операции:
/get-cheapest/{id1}/{id2} : выбрать из двух квартир с id=id1 и id=id2 более дешёвую
/get-ordered-by-time-to-metro/{by-transport}/{desc} : вернуть список всех квартир, отсортированный по времени, которое требуется, чтобы добраться от них до метро пешком (или на транспорте) в порядке возрастания (или убывания)
8) Оба веб-сервиса и клиентское приложение должны быть развёрнуты на сервере helios.

# Условие лабораторной работы №3 (ветка lab3)

Переработать веб-сервисы из лабораторной работы #2 таким образом, чтобы они реализовывали основные концепции микросервисной архитектуры. Для этого внести в оба сервиса -- "вызываемый" (из лабораторной работы #1) и "вызывающий" (добавленный в лабораторной работе #2) перечисленные ниже изменения.
## Изменения в "вызываемом" сервисе:
1) Разделить приложение на два модуля -- веб-приложение с веб-сервисом и EJB-jar с бизнес-компонентами.
2) Переместить всю логику из класса сервиса в Stateless EJB. В классе сервиса оставить только обращение к методам бизнес-интерфейса. EJB-компонент должен быть доступен удалённо (иметь Remote-интерфейс).
3) Сформировать на уровне сервера приложений пул компонентов EJB настраиваемой мощности, динамически расширяемый при увеличении нагрузки.
4) Установить ПО Consul и настроить Service Discovery с его помощью. Сервис должен регистрироваться в Service Discovery в момент запуска.
## Изменения в "вызывающем" сервисе:
1) Переработать сервис, обеспечив возможность его развёртывания на платформе Spring Cloud.
2) Использовать все основные компоненты архитектуры Spring Cloud: Config Service, Load Balancer, Service Discovery.
3) В качестве Service Discovery использовать Eureka.
4) В качестве балансировщика нагрузки использовать Ribbon.
5) Все запросы к сервисам должны прокироваться через API Gateway. В качестве API Gateway использовать Zuul Proxy.
6) Оба веб-сервиса и клиентское приложение должны сохранить полную совместимость с API, реализованными в рамках предыдущих лабораторных работ.

# Условие лабораторной работы №4 (ветка lab4)

Переработать сервисы из лабораторной работы #3 следующим образом:

1) Первый ("вызываемый") сервис переписать в соответствии с требованиями протокола SOAP.
2) Развернуть переработанный сервис на сервере приложений по собственному выбору.
3) Оставшийся сервис не модифицировать, не менять его API, протокол и используемый сервер приложений.
4) Установить и сконфигурировать на сервере Helios программное обеспечение Mule ESB.
5) Настроить интеграцию двух сервисов с использованием установленного программного обеспечения.
6) Реализовать дополнительную REST-"прослойку", обеспечивающую возможность доступа к переработанному сервису клиентского приложения без необходимости его модификации. Никакой дополнительной логики, помимо вызовов SOAP-сервиса, разработанная REST-прослойка содержать не должна.


